<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TURBO ¬∑ Family</title>

  <!-- cache-bust -->
  <link rel="stylesheet" href="style.css?v=FAMILY_BRIGHT1FIX3" />
</head>
<body>
  <div class="container">
    <header class="top">
      <div class="brand">
        <div class="badge">TURBO</div>
        <div>
          <h1>TURBO ¬∑ Family</h1>
          <p class="subtitle">Family + relationships (EN ‚Üí ES)</p>
        </div>
      </div>

      <div class="meta">
        <div class="pill">
          <span class="pillLabel">Build</span>
          <span class="pillValue">FAMILY_BRIGHT1</span>
        </div>
        <div class="pill">
          <span class="pillLabel">Spanish reads</span>
          <span class="pillValue" id="reads-pill">‚Äî</span>
        </div>
        <div class="pill">
          <span class="pillLabel">Rule</span>
          <span class="pillValue">+30s per wrong/blank</span>
        </div>
        <div class="pill">
          <span class="pillLabel">Round</span>
          <span class="pillValue">10 prompts</span>
        </div>
      </div>
    </header>

    <!-- If script.js fails to load/run, this appears -->
    <div id="bootError" class="bootError" style="display:none;">
      <div class="bootTitle">‚ö†Ô∏è Game didn‚Äôt start (script.js not running)</div>
      <div class="bootBody">
        <p>This is why no level buttons appear.</p>
        <ol>
          <li>Confirm your repo root contains: <strong>index.html</strong>, <strong>style.css</strong>, <strong>script.js</strong>, and your crest image.</li>
          <li>Confirm this file loads JS with: <code>&lt;script src="script.js?..."></code> (exact name: <strong>script.js</strong>).</li>
          <li>Hard refresh the page (Ctrl+F5 / Cmd+Shift+R) or open: <code>?v=fix3</code></li>
          <li>Open DevTools ‚Üí Console to see any error message.</li>
        </ol>
      </div>
    </div>

    <section class="card" id="menu">
      <h2>Choose level + mode</h2>
      <p class="help">
        For 2 devices: enter the same <strong>Match Code</strong> ‚Üí same 10 prompts ‚Üí each device produces a short <strong>Result Code</strong>.
      </p>

      <div class="row">
        <label class="field">
          <span class="label">Mode</span>
          <select id="mode">
            <option value="classic">Classic</option>
            <option value="survival">Survival</option>
            <option value="sprint">Sprint (60s)</option>
            <option value="team">Team Relay</option>
          </select>
        </label>

        <label class="field">
          <span class="label">Match Code (same prompts across devices)</span>
          <div class="inline">
            <input id="matchCode" placeholder="Leave blank for solo random" maxlength="10" />
            <button class="btn" id="genCode" type="button">Generate</button>
          </div>
          <span class="hint">For competitions, use the same code on both devices.</span>
        </label>

        <label class="field" id="teamSizeField" style="display:none;">
          <span class="label">Team size</span>
          <input id="teamSize" type="number" min="2" max="8" value="4" />
          <span class="hint">Questions assign Player 1‚Ä¶N cycling.</span>
        </label>
      </div>

      <div class="tip">
        Tip: üîà reads EN prompt ¬∑ üîä reads ES target (limited tokens per attempt). Accents required; capitals ignored; √± counts as n.
      </div>

      <div id="level-list" class="levelGrid"></div>
    </section>

    <section class="card" id="game" style="display:none;">
      <div class="gameHead">
        <div>
          <h2 id="game-title">Level</h2>
          <p id="game-subtitle" class="help">Translate the family term into Spanish.</p>
          <div class="smallRow">
            <div class="pill mini"><span class="pillLabel">Mode:</span> <span class="pillValue" id="modeLabel">‚Äî</span></div>
            <div class="pill mini"><span class="pillLabel">Match Code:</span> <span class="pillValue" id="matchLabel">‚Äî</span></div>
          </div>

          <!-- rules explainer -->
          <div id="modeRules" class="modeRules">Rules will appear here.</div>
        </div>

        <div class="stats">
          <div id="timer" class="timer">Time: 0s</div>
          <div class="readsBox">
            Spanish reads left (this attempt):
            <strong id="reads-left">‚Äî</strong>
          </div>
          <div id="speedCap" class="cap" style="display:none;">Sprint cap: 60s (auto-submit)</div>
        </div>
      </div>

      <div id="questions" class="questions"></div>

      <div class="controls">
        <button id="submit" class="btn primary" type="button">Finish & Check</button>
        <button id="back-button" class="btn" type="button">Back to Menu</button>
      </div>

      <div id="results" class="results"></div>
    </section>

    <section class="card">
      <h2>Compare two Result Codes</h2>
      <p class="help">Paste two short Result Codes. It checks same level + mode + match fingerprint, then declares a winner.</p>

      <div class="row">
        <label class="field">
          <span class="label">Player A Result Code</span>
          <input id="codeA" placeholder="e.g., 03C-AB0FZ-9K2X.." />
        </label>
        <label class="field">
          <span class="label">Player B Result Code</span>
          <input id="codeB" placeholder="e.g., 03C-AB0FZ-9K2X.." />
        </label>
      </div>

      <div class="controls">
        <button class="btn primary" id="compareBtn" type="button">Compare</button>
        <button class="btn" id="clearCompare" type="button">Clear</button>
      </div>

      <div id="compareOut"></div>
    </section>

    <footer class="footer">
      ¬© 2026 TURBO Games ¬∑ Synge Street CBS ¬∑ Educational classroom use only ¬∑ Not for redistribution.
    </footer>
  </div>

  <noscript>
    <div class="bootError" style="display:block;">
      <div class="bootTitle">‚ö†Ô∏è JavaScript is disabled</div>
      <div class="bootBody">This game needs JavaScript enabled to show level buttons.</div>
    </div>
  </noscript>

  <!-- cache-bust -->
  <script src="script.js?v=FAMILY_BRIGHT1FIX3" defer></script>

  <!-- BOOT CHECK -->
  <script>
    window.__TURBO_FAMILY_BOOTED = false;
    setTimeout(function(){
      if (!window.__TURBO_FAMILY_BOOTED) {
        var el = document.getElementById("bootError");
        if (el) el.style.display = "block";
      }
    }, 900);
  </script>
</body>
</html>
